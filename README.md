# Foxlate 🦊

一个功能强大的浏览器扩展，旨在提供无缝的网页内容翻译体验。支持多种翻译服务，并提供灵活的配置选项，让您轻松翻译选定的文本或管理翻译设置。

## ✨ 主要特性

- **右键菜单翻译**：选中网页上的任何文本，通过右键菜单快速翻译。翻译结果将以浮窗形式显示在选定文本附近。
- **多翻译引擎支持**：
  - **DeepLx**：支持自定义 DeepLx API 地址。
  - **Google Translate**：通过 Google Cloud Translation API 进行翻译。
  - **AI Translator (GPT)**：支持 OpenAI 兼容的 API，可自定义 API 地址和模型名称。
- **高级显示模式**: 不仅仅是浮窗！您可以选择将译文直接**替换**原文、**追加**在原文后方。
- **域名定制规则**: 为特定网站设置专属翻译规则！您可以为不同域名配置是否自动翻译、使用哪个翻译引擎、目标语言，甚至可以指定需要翻译的网页元素（通过 CSS 选择器）。
- **内容过滤 (预检规则)**: 通过强大的正则表达式规则，精确控制哪些内容**不**被翻译。非常适合用于避免翻译代码、专有名词或特定格式的文本。
- **键盘快捷键**:
  - `Alt+S`: 快速翻译您选中的文本。
  - `Alt+A`: 切换页面翻译状态（例如，开启或关闭划词翻译等自动功能）。
- **多语言界面**：扩展界面支持多语言（i18n），为不同地区的用户提供更友好的体验。
- **连接测试**：在设置页面提供“测试连接”功能，帮助您验证翻译引擎的 API 配置是否正确。
- **灵活的设置页面**：
  - 选择偏好的翻译引擎。
  - 设置目标翻译语言。
  - 导入/导出设置，方便备份和迁移。
- **跨浏览器兼容**: 基于 WebExtension Polyfill 开发，确保在 Chrome 和 Firefox 上提供一致的体验。
- **友好的用户界面**：简洁直观的设置页面和翻译结果展示。

## 🚀 支持的翻译引擎

目前支持以下翻译引擎：

- **DeepLx**
- **Google Translate**
- **AI Translator (GPT)** (兼容 OpenAI API)

## 🛠️ 安装指南

### 开发模式下加载 (推荐用于测试和开发)

**请注意：** 这是一个开发中的扩展，不建议直接从未知来源安装到您的主浏览器。以下步骤适用于在开发模式下加载扩展进行测试。

#### 对于 Firefox

1.  打开 Firefox 浏览器。
2.  在地址栏输入 `about:debugging` 并回车。
3.  点击左侧菜单中的 **“此 Firefox”**。
4.  点击 **“加载临时附加组件...”** 按钮。
5.  导航到扩展的根目录，然后选择 `manifest.json` 文件。
6.  扩展将作为临时附加组件加载，并在浏览器工具栏中显示其图标。

#### 对于 Chrome

1.  打开 Chrome 浏览器。
2.  在地址栏输入 `chrome://extensions` 并回车。
3.  打开右上角的 **“开发者模式”** 开关。
4.  点击 **“加载已解压的扩展程序”** 按钮。
5.  导航到扩展的根目录，然后选择整个文件夹。
6.  扩展将加载并显示在您的扩展程序列表中。

## 💡 使用方法

### 1. 配置翻译引擎

1.  点击浏览器工具栏中的扩展图标，打开弹出窗口。
2.  点击弹出窗口底部的 **“选项”** 按钮，进入设置页面。
3.  在“通用设置”部分，选择您希望使用的 **“Translation Engine”**。
4.  根据所选引擎，填写相应的 **API URL** 或 **API Key**。
    - **DeepLx**：输入您的 DeepLx API 地址。
    - **Google Translate**：输入您的 Google Cloud Translation API Key。
    - **AI Translator**：输入您的 AI API Key，并可选地设置 API Endpoint URL 和 Model Name。
5.  点击 API 输入框旁边的 **“Test”** 按钮，验证您的配置是否正确。测试结果将以浮窗形式显示。
6.  设置 **“Target Language”** (例如 `ZH` 代表中文，`EN` 代表英文)。
7.  点击页面底部的 **“Save Settings”** 按钮保存您的配置。

### 2. 翻译文本

在任何网页上选中您想要翻译的文本后，您可以通过以下任一方式进行翻译：

- **方法一：使用右键菜单**
  - 右键点击选中的文本，在上下文菜单中选择 **“使用 Foxlate 翻译 '您选中的文本...'”**。
- **方法二：使用快捷键**
  - 按下快捷键 `Alt+S` (在 macOS 上可能为 `Option+S`)。

翻译结果将以一个带有箭头的小浮窗显示在选定文本的附近。点击浮窗右上角的 `×` 按钮可以关闭浮窗。

### 3. 选择显示模式
在设置页面的“通用设置”中，您可以找到“Display Mode”选项，它决定了翻译结果如何呈现：
- **浮窗 (Popup)**: 默认模式，在原文旁显示一个可关闭的浮窗。
- **替换 (Replace)**: 直接用译文替换掉您选择的原文。
- **追加 (Append)**: 在原文后面紧跟着插入译文。

## ⚙️ 高级配置说明

除了基本设置，Foxlate 还提供了强大的高级配置功能，让您完全掌控翻译行为。

### 域名规则 (Domain Rules)

此功能允许您为特定的网站（域名）设置独立的翻译规则，覆盖您的全局默认设置。

- **如何创建规则**: 在“高级设置”标签页中，点击“添加域名规则”按钮。
- **可配置项**:
  - **域名**: 您想要应用规则的网站域名 (例如 `github.com`)。
  - **应用到子域名**: 规则是否也对所有子域名生效 (例如 `gist.github.com`)。
  - **自动翻译**: 在该网站上是否启用自动翻译功能。
  - **翻译引擎/目标语言**: 为该网站指定不同于全局设置的翻译引擎或目标语言。
  - **CSS 选择器**: (高级) 精确指定此规则应用于页面上的哪些元素。您可以覆盖或继承全局选择器。

### 预检规则 (Pre-check Rules)

预检规则是一个强大的内容过滤器。在文本被发送到翻译引擎之前，它会根据您定义的正则表达式 (Regex) 规则进行检查，以决定是否应该跳过翻译。这对于避免翻译代码、专有名词、URL 等内容非常有用。

## 🤝 开发与贡献


如果您对这个项目感兴趣，并希望进行开发或贡献，请按照以下步骤操作：

1.  克隆本仓库到您的本地机器。
2.  根据上述“安装指南”中的步骤，在您的浏览器中加载扩展。
3.  修改代码后，在 `about:debugging` (Firefox) 或 `chrome://extensions` (Chrome) 页面点击扩展旁边的“重新加载”按钮，即可看到更改。

欢迎提交 Pull Request 或报告 Bug！

## 📄 许可证

本项目采用 MIT License 许可。

---

**感谢您使用 Foxlate！**
